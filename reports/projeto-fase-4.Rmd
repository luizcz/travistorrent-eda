---
title: "EDA dos projetos"
output:
  html_document:
    df_print: paged
---

```{r setup}
library(tidyverse)
library(here)
library(knitr)
theme_set(theme_bw())
```

## Sobre o projeto
Este relatório utiliza dados sobre a utilização de integração continua gerados pelo projeto travis torrent e tem como intenção o estudo do comportamento dos projetos dado as estatísticas geradas. Os dados foram pré-processados pelo professor Nazareno e projeto pode ser acessado aqui: https://github.com/nazareno/travistorrent-eda .  

## Lendo os dados

Os dados já processados dos projetos

```{r read}
projetos = read_csv(here::here("data/projetos.csv"))
```
Removendo os dados dos projetos que contém java script.

```{r clean}
projetos = projetos %>% 
    filter(lang != "javascript")
```

## Buscando respostas

Uma vez que temos os dados derivados dos dados originais podemos fazer algumas análises para ter um entendimento melhor. Com estudo anterior chegou-se a algumas perguntas que podem ser respondidas com os dados. Nesse relatório eu busco responder duas perguntas que são as seguintes:

*Qual linguagem tem uma maior variação de tamanho de projetos?

*Projetos com mais linhas de código são os que tem mais commits?

## Qual linguagem tem uma maior variação de tamanho de projetos?

Para começarmos a entender a variação dos dados primeiramente devemos ver como os tamanhos de projetos estão destribuidos para cada uma das linguagens vendo o tamanho de todos os projetos.
```{r}
projetos %>% 
    ggplot(aes(x = lang, 
               y = sloc_end)) + 
    geom_jitter(alpha = .4, width = .4, size = .5) +
    scale_y_log10()
```
Podemos observar a variação no tamanho do projeto porém não podemos afirmar muita coisa com certeza pois as linguagens tem números diferentes de projetos. Para termos uma melhor referência podemos utilizar um boxplot por ser um gráfico mais adequado para a comparação pois o tamanho da caixa do bloxplot não é influenciado pela quantidade de pontos. O tamanho da caixa mostra para a gente a variação dos tamanhos do projeto que é o que queremos chegar a uma conclusão.
```{r}
projetos %>% 
    ggplot(aes(x= lang, 
               y = sloc_end)) + 
    geom_boxplot(width = .25)+
    geom_jitter(alpha = .1, width = .2, size = .8, color="cyan3") +
    scale_y_log10()
```

```{r}
projetos %>% 
    ggplot(aes(x = "um label", 
               y = build_success_prop)) + 
    geom_jitter(alpha = .4, width = .2, size = .8) 
```


```{r}
projetos %>% 
    ggplot(aes(x = team)) + 
    geom_histogram(binwidth = 10, fill = "white", color = "blue") + 
    geom_rug(alpha = .5)

projetos %>% 
    ggplot(aes(x = build_success_prop)) + 
    geom_histogram(binwidth = .1, fill = "white", color = "red") + 
    geom_rug(alpha = .3)
```

```{r}
projetos %>% 
    ggplot(aes(x = team)) + 
    stat_ecdf()
```

```{r}
projetos %>% 
    ggplot(aes(x= lang, 
               y = build_success_prop)) + 
    geom_boxplot(width = .25)

projetos %>% 
    ggplot(aes(x= build_success_prop)) + 
    geom_histogram(bins = 10) + 
    facet_grid(lang ~ .)

projetos %>% 
    ggplot(aes(x= build_success_prop, color = lang)) + 
    stat_ecdf() 

```

```{r}
projetos %>% 
    ggplot(aes(x = build_success_prop, color = lang)) + 
    geom_density()
```

```{r}
projetos %>% 
    ggplot(aes(y = build_success_prop, 
               x = lang)) + 
    geom_violin() + 
    geom_jitter(width = .1, alpha = .1)
```


1 nominal x 1 numérica

```{r}
projetos %>% 
    ggplot(aes(x = lang, y = team)) + 
    geom_jitter(alpha = .4, width = .2, size = .8) 
```

Transformação de log na escala da variável team:

```{r}
projetos %>% 
    ggplot(aes(x = lang, y = team)) + 
    geom_jitter(alpha = .4, width = .2, size = .8) + 
    scale_y_log10()
```

O que é a transformação de log

```{r}
escalas = tibble(x = 10**(1:20), 
                 escala_linear = x, 
                 escala_log = log10(x))

escalas
```


### Histogramas e density plots

```{r}
projetos %>% 
    ggplot(aes(x = sloc_end)) + 
    geom_histogram(bins = 20, fill = "white", color = "blue") + 
    facet_grid(lang ~ .) +
    scale_x_log10()
```

Density

Rugs

ECDFs

Boxplots

Violin


```{r}
projetos %>% 
    ggplot(aes(x = activity_period)) + 
    geom_histogram(bins = 10, fill = "white", color = "blue") + 
    geom_rug(alpha = .3) + 
    facet_grid(lang ~ .) 
```



```{r}
projetos %>% 
    ggplot(aes(x = sloc_end, color = lang)) + 
    stat_ecdf() + 
    scale_x_log10()
```

```{r}
projetos %>% 
    ggplot(aes(x = build_success_prop)) + 
    geom_density()
```

```{r}
projetos %>% 
    ggplot(aes(x = team, 
               y = commits_per_month)) + 
    geom_point(alpha = .3) + 
    scale_x_log10() + 
    scale_y_log10()
```

